import expenseTracker
import tkinter as tk
from tkinter import ttk # Used for Treeview and stylized widgets

# --- 1. MODEL ---
# In a real project, this would be a class that handles file I/O or a database
def add_expense_to_model(date, amount, category):
    expenseTracker.addExpense(date, amount, category)

# --- 2. CONTROLLER (Handles Button Clicks) ---
def submit_expense():
    """Gets data from the entry fields and calls the model function."""
    # Retrieve the text from the input variables
    date_val = date_entry.get()
    amount_val = amount_entry.get()
    category_val = category_var.get()

    # Basic validation (In a real app, this would be more robust)
    if not amount_val or category_val == "Select Category":
        print("Error: Please enter an amount and select a category.")
        return

    # Call the Model function to process the data
    add_expense_to_model(date_val, amount_val, category_val)

    # Clear the input fields after submission
    amount_entry.delete(0, tk.END)
    date_entry.delete(0, tk.END)
    category_var.set("Select Category")


# --- 3. VIEW (The GUI Setup) ---

# Initialize the main window
root = tk.Tk()
root.title("Python Expense Tracker")

# Create a Frame to hold the input widgets (for better layout management)
input_frame = ttk.Frame(root, padding="10")
input_frame.grid(row=0, column=0, padx=10, pady=10, sticky="nsew")


# --- Input Fields ---

# 1. Date Input
ttk.Label(input_frame, text="Date (MM/DD/YY):").grid(row=0, column=0, sticky="w", pady=5)
date_entry = ttk.Entry(input_frame)
date_entry.grid(row=0, column=1, padx=5, pady=5, sticky="ew")

# 2. Amount Input
ttk.Label(input_frame, text="Amount ($):").grid(row=1, column=0, sticky="w", pady=5)
amount_entry = ttk.Entry(input_frame)
amount_entry.grid(row=1, column=1, padx=5, pady=5, sticky="ew")

# 3. Category Input (Dropdown Menu)
ttk.Label(input_frame, text="Category:").grid(row=2, column=0, sticky="w", pady=5)
categories = ["Select Category", "Food", "Rent", "Transport", "Utilities", "Other"]
category_var = tk.StringVar(root)
category_var.set(categories[0]) # Set default value

category_menu = ttk.OptionMenu(input_frame, category_var, categories[0], *categories)
category_menu.grid(row=2, column=1, padx=5, pady=5, sticky="ew")

# 4. Submit Button
submit_button = ttk.Button(input_frame, text="Add Expense", command=submit_expense)
submit_button.grid(row=3, column=0, columnspan=2, pady=10)


# --- Display Area (Placeholder for a List of Expenses) ---
# In a full app, you would use a ttk.Treeview here.
display_label = ttk.Label(root, text="[Expense List / Summary Table will go here]")
display_label.grid(row=1, column=0, padx=10, pady=10, sticky="nsew")


# Start the Tkinter event loop
root.mainloop()